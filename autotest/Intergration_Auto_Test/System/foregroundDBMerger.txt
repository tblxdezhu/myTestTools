*** Settings ***
Documentation     | Description | test normal foregroundDBMerger of slam/align snippet |
...               | Input | 1.DB |
...               | | 2.input json |
...               | | 3.snippet |
...               | Execute | call the command line to process foregroundDBMerger |
...               | Expect result | 1.output json |
...               | | 2.in output json, status,quality,divisionlist and length\ |
Suite Setup
Resource          ../Resource/RFresource/System/lib_res_var.txt

*** Test Cases ***
Slam Merger
    [Documentation]    | Description | test normal foregroundDBMerger of slam snippet |
    ...    | Input | 1.DB |
    ...    | | 2.input json |
    ...    | | 3.snippet |
    ...    | Execute | call the command line to process foregroundDBMerger |
    ...    | Expect result | 1.output json |
    ...    | | 2.in output json, status,quality,divisionlist and length\ |
    [Tags]    level 1    normal
    [Setup]    utilities.Check Environment
    Log    Log ***************************************************************************************input***************************************************************************************
    Prepare Snippet/DB/Json for T1/T2/T3/DBgenerator    cp -r ${sfilefortest}/ForegroundDBMerger/slam/snippet/* /opt/ygomi/roadDB/file_storage/WorkflowManager/unzip/    mysql -udba -pmysql<${sfilefortest}/ForegroundDBMerger/slam/dbbak.sql    cp ${sfilefortest}/ForegroundDBMerger/slam/1524731106507-2.json /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerJson/
    Log    Log ***************************************************************************************execute***************************************************************************************
    Execute My Command    /opt/ygomi/roadDB/bin/foregroundDBMerger \ --ijson \ /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerJson/1524731106507-2.json \ --ojson \ /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerJson/status-1520564939346-2.json \ --d \ /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerDebug/debug-1520564939346-2 \ --pcfg \ /opt/ygomi/roadDB/etc/config \ --manual \ --ol ${sOutput}/ForegroundDBMerger
    Log    Log ***************************************************************************************result check***************************************************************************************
    @{rKeyValueList}    Check Keyvalue    /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerJson/status-1520564939346-2.json    "Status"
    Varify KeyValue    ${2}    @{rKeyValueList}
    @{rKeyValueList}    Check Keyvalue    /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerJson/status-1520564939346-2.json    "Quality"
    Varify KeyValue    ${0}    @{rKeyValueList}
    Check Division Length Reference    /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerJson/status-1520564939346-2.json    "DivisionID"    ${sForegroundDBMergerDivisionlist1}
    Check Division Length Reference    /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerJson/status-1520564939346-2.json    "length"    ${sForegroundDBMergerLength1}

Align Merger
    [Documentation]    | Description | test normal foregroundDBMerger of align snippet |
    ...    | Input | 1.DB |
    ...    | | 2.input json |
    ...    | | 3.snippet |
    ...    | | 4.reference |
    ...    | Execute | call the command line to process foregroundDBMerger |
    ...    | Expect result | 1.output json |
    ...    | | 2.in output json, status,quality,divisionlist and length |
    [Tags]    level 1    normal
    [Setup]    utilities.Check Environment
    Log    Log ***************************************************************************************input***************************************************************************************
    Prepare Snippet/DB/Json for T1/T2/T3/DBgenerator    cp -r ${sfilefortest}/ForegroundDBMerger/align/WorkflowManager /opt/ygomi/roadDB/file_storage/    mysql -udba -pmysql<${sfilefortest}/ForegroundDBMerger/align/dbbak.sql    cp ${sfilefortest}/ForegroundDBMerger/align/1524733383459-4.json /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerJson/
    Log    Log ***************************************************************************************execute***************************************************************************************
    Execute My Command    /opt/ygomi/roadDB/bin/foregroundDBMerger \ --ijson \ /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerJson/1524733383459-4.json \ --ojson \ /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerJson/status-1520578465515-5.json \ --d \ /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerDebug/debug-1520578465515-5 \ --pcfg \ /opt/ygomi/roadDB/etc/config \ --manual \ --ol ${sOutput}/ForegroundDBMerger
    Log    Log ***************************************************************************************result check***************************************************************************************
    @{rKeyValueList}    Check Keyvalue    /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerJson/status-1520578465515-5.json    "Quality"
    Varify KeyValue    ${0}    @{rKeyValueList}
    Check Alignmerger Status    /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerJson/status-1520578465515-5.json    "Status"    1    2
    Check Division Length Reference    /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerJson/status-1520578465515-5.json    "DivisionID"    ${sForegroundDBMergerDivisionlist1}
    Check Division Length Reference    /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/foregroundDbMergerJson/status-1520578465515-5.json    "length"    ${sForegroundDBMergerLength1}
