*** Settings ***
Documentation     | Description | test normal logicinfoextract of sdor snippet |
...               | Input | 1.DB,gpsskeleton,roadskeleton |
...               | | 2.input json |
...               | | 3.sdor |
...               | Execute | call the command line to process logicinfoextract |
...               | Expect result | 1.road information in DB,included coredb.roads,coredb.lanes,coredb.lines. |
Suite Setup
Resource          ../Resource/RFresource/System/lib_res_var.txt

*** Test Cases ***
LogicInfoExtract
    [Documentation]    | Description | test normal logicinfoextract of sdor snippet |
    ...    | Input | 1.DB,gpsskeleton,roadskeleton |
    ...    | | 2.input json |
    ...    | | 3.sdor |
    ...    | Execute | call the command line to process logicinfoextract |
    ...    | Expect result | 1.road information in DB,included coredb.roads,coredb.lanes,coredb.lines. |
    [Tags]    level 1    normal
    [Setup]    utilities.Check Environment
    Log    Log ***************************************************************************************input***************************************************************************************
    #prepare reference and sdor
    Prepare Snippet/DB/Json for T1/T2/T3/DBgenerator    cp -r ${sfilefortest}/LogicInfoExtractor/WorkflowManager/* /opt/ygomi/roadDB/file_storage/WorkflowManager/    mysql -udba -pmysql<${sfilefortest}/LogicInfoExtractor/dbbak.sql    cp ${sfilefortest}/LogicInfoExtractor/1524735376941-2.json /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/logicInfoExtractorJson/
    Log    Log ***************************************************************************************execute***************************************************************************************
    Execute My Command    /opt/ygomi/roadDB/bin/logicInfoExtractor \ --ijson \ /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/logicInfoExtractorJson/1524735376941-2.json \ --d \ /opt/ygomi/roadDB/work_path/WorkflowManager/ForegroundDBMerger/logicInfoExtractorDebug/debug-1520408740203-2 \ --manual \ --ol ${sOutput}/LogicInfoExtractor
    Log    Log ***************************************************************************************result check***************************************************************************************
    Query CoreDB Keyfield    select count(*) from roads where transaction_id=3;    2
    Query CoreDB Keyfield    select count(*) from coredb.lanes where transaction_id=3;    2
    Query CoreDB Keyfield    select count(*) from coredb.lines where transaction_id=3;    6
